parameters:
  - name: tfversion
    default: 1.2.3

steps:
- task: TerraformInstaller@0
  displayName: Terraform install
  inputs:
    terraformVersion: ${{ parameters.tfversion }}
- task: CmdLine@2
  displayName: 'Run pre-commit static analysis'
  inputs:
    targetType: 'inline'
    script: |
      curl -s https://raw.githubusercontent.com/terraform-linters/tflint/master/install_linux.sh | bash
      python3 -m pip install --upgrade pip
      pip3 install pre-commit
      pre-commit run --all-files
